let set=new Set,userSet=new Set,compSet=new Set,resultDeclared=!1;function replay(){resultDeclared=!1,set=new Set,userSet=new Set,compSet=new Set,document.getElementById("result").innerHTML="",document.getElementById("t").innerHTML='<tr><td id="1" onclick="userClick(1)"></td><td id="2" onclick="userClick(2)"></td><td id="3" onclick="userClick(3)"></td></tr><tr><td id="4" onclick="userClick(4)"></td><td id="5" onclick="userClick(5)"></td><td id="6" onclick="userClick(6)"></td></tr><tr><td id="7" onclick="userClick(7)"></td><td id="8" onclick="userClick(8)"></td><td id="9" onclick="userClick(9)"></td></tr>'}function userClick(e){if(!resultDeclared){if(set.has(e)){alert("Please select unvisited box");return}if(document.getElementById(e).innerHTML="&#10050;",console.log("user clicked",e),set.add(e),userSet.add(e),set.size>3&&(console.log("Judging"),judgeWinner(userSet))){won(),console.log("userSet",userSet),console.log("compSet",compSet);return}let t=randomIntFromInterval(1,9);for(;set.has(t)&&set.size<9;)console.log("random generated value ",t),t=randomIntFromInterval(1,9);if(console.log("random generated value ",t),set.add(t),compSet.size>=4){setTimeout(()=>{document.getElementById("result").innerHTML='<div><h2>It\'s a draw!!!</h2><br/><button onclick="replay()" style="background-color: #068dc3;border: none;color: white;padding: 15px;text-align: center;text-decoration: none;display: inline-block;font-size: 16px;">Restart</button></div>'},200),resultDeclared=!0,console.log("userSet",userSet),console.log("compSet",compSet);return}compSet.add(t),setTimeout(()=>{document.getElementById(t).innerHTML="&#10008;"},300),judgeWinner(compSet)?(setTimeout(()=>{document.getElementById("result").innerHTML='<div><h2>You Lost!!!</h2><br/><button onclick="replay()" style="background-color: #068dc3;border: none;color: white;padding: 15px;text-align: center;text-decoration: none;display: inline-block;font-size: 16px;">Restart</button></div>'},1e3),resultDeclared=!0,console.log("userSet",userSet),console.log("compSet",compSet)):lost(userSet.size)}}function judgeWinner(e){if(e.has(3)&&e.has(5)&&e.has(7)||e.has(1)&&e.has(5)&&e.has(9))return!0;if(e.has(1)&&e.has(2)&&e.has(3))return!0;if(e.has(4)&&e.has(5)&&e.has(6))return!0;if(e.has(7)&&e.has(8)&&e.has(9))return!0;else if(e.has(1)&&e.has(4)&&e.has(7))return!0;else if(e.has(2)&&e.has(5)&&e.has(8))return!0;else if(e.has(3)&&e.has(6)&&e.has(9))return!0;return!1}function lost(e){return e<5?(console.log("Player has attempts left"),!1):(setTimeout(()=>{document.getElementById("result").innerHTML='<div><h2>You Lost!!!</h2><br/><button onclick="replay()" style="background-color: #068dc3;border: none;color: white;padding: 15px;text-align: center;text-decoration: none;display: inline-block;font-size: 16px;">Restart</button></div>'},500),resultDeclared=!0,console.log("userSet",userSet),console.log("compSet",compSet),!0)}function won(){resultDeclared=!0,document.getElementById("result").innerHTML='<div><h2>Congratulations!! You Won!!!</h2><br/><button onclick="replay()" style="background-color: #068dc3;border: none;color: white;padding: 15px;text-align: center;text-decoration: none;display: inline-block;font-size: 16px;" >Restart</button></div>'}function randomIntFromInterval(e,t){return Math.floor(Math.random()*(t-e+1)+e)}